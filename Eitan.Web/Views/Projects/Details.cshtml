@model Eitan.Models.Project

@{
    ViewBag.Title = Model.Title;
}

@using Eitan.Web.Models

@section head{
    <link href="~/Content/coda-slider.css" rel="stylesheet" />

}
@section scripts{
            <script src="~/Scripts/jquery-ui-1.8.20.min.js"></script>
    <script src="~/Scripts/jquery.coda-slider-3.0.min.js"></script>
    
    <script type="text/javascript">

        if (false) {
        $(".project-main-image").ready(function () {
            InitiateCodaSlider();
        });
        }
        else {
            $(window).load(function () {
                InitiateCodaSlider();
            });
        }

        function InitiateCodaSlider() {
            @if (Model.VideoPath != null && Model.VideoPath != string.Empty)
            {
               <text>
                $('#slider-id').codaSlider();
                $(".AjaxLink").click(function () {
                    //alert("test");
                    stopVideo($(".project-iframe"));
                });
                </text>
            }
        }

        //$(document).ready(function () {
        //    if ($('.project-iframe').length > 0)
        //        $('.project-iframe').attr('src', $('.project-iframe').data('src'));
        //});

        function stopVideo($video) {
            var video = $video.attr("src");
            $video.delay(500).attr("src", "");
            $video.attr("src", video);
            $video;
        }
</script>

}

<div id="project-single-wrap">
    <div class="float-right" id="project-single-slider">
        <div class="main-images">
            <div class="coda-slider" id="slider-id">
                @if (!string.IsNullOrEmpty(Model.MainImage))
                {
                <div>
                    <p>
                        <img class="project-main-image" src="~/Images/Projects/@Model.MainImage" alt="@Model.Title" alt="@Model.Title" />
                    </p>
                </div>
                }
                @if (Model.VideoPath != null && Model.VideoPath.Contains("youtube.com"))
                {
                    var videoid = Model.VideoPath.GetYoutubeVideoID();
                    <div>
                        <p>
                            <iframe class="project-iframe" src="http://www.youtube.com/embed/@videoid?wmode=transparent&amp;" width="640" height="480" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
                        </p>
                    </div>
                }
                else if (Model.VideoPath != null && Model.VideoPath.Contains("vimeo.com"))
                {
                    var videoid = Model.VideoPath.GetVimeoVideoID();
                    <div>
                        <p>
                            <iframe class="project-iframe" src="http://player.vimeo.com/video/@videoid" width="640" height="360" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
                        </p>
                    </div>
                }
            </div>


        </div>


    </div>
    <div id="project-info" class="float-left">
        <div id="details-project-title" class="details-title">@Model.Title</div>
        <div id="details-project-add-info" class="details-additional-info">
            <div class="details-property-div"><span class="property-type">Date:</span>@Model.Date_Creation.ToString("dd/MM/yyyy")</div>
            <div class="details-property-div"><span class="property-type">Client:</span>@if (Model.Client != null)
                                                                                        { @Model.Client.Title}</div>
            <div class="details-property-div"><span class="property-type">Type:</span>@if (Model.Type != null)
                                                                                      { @Model.Type.Title}</div>
            @if (!string.IsNullOrEmpty(Model.Link_External))
            {
                <div class="details-property-div"><span class="property-type">External Link:</span><a href="@Model.Link_External" target="_blank">Click Here!</a></div>
            }
        </div>
        <div class="details-content">
            @Html.Raw(Model.Content)
        </div>

    </div>

</div>
<!-- FB Comments -->
@Html.Partial("_FBComments")
<!-- END FB Comments -->
